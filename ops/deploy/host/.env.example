##
## deploy/host/.env
##
## Copy this file to `.env` and edit values.
##
## This stack is designed for Cloudflare Tunnel:
## - HTTP services bind to BIND_ADDR (default 127.0.0.1) for cloudflared to reach locally.
## - SFU media is UDP and must be exposed publicly (port range below).
##

# Where to bind HTTP ports on the host (cloudflared can connect to localhost).
BIND_ADDR=127.0.0.1

# Host ports (change if you have conflicts)
CLIENT_HTTP_PORT=8080
SERVER_HTTP_PORT=5000
SFU_WS_PORT=5005

# SFU UDP media port range (MUST be reachable from the internet)
SFU_UDP_MIN=10000
SFU_UDP_MAX=10004

# Optional: if the SFU host is behind NAT / has multiple NICs, set the public IP it should advertise.
# SFU_ADVERTISE_IP=203.0.113.10

# STUN servers (comma-separated)
STUN_SERVERS=stun:stun.l.google.com:19302,stun:stun1.l.google.com:19302

# What the browser should use to reach the SFU websocket (public URL).
# This must be a WSS URL that terminates TLS at Cloudflare.
SFU_PUBLIC_HOST=wss://sfu.example.com

# What the browser origin is (for CORS). Comma-separated list is supported.
CORS_ORIGIN=https://gryt.example.com

# Server identity (optional)
SERVER_NAME=My Gryt Server
SERVER_PASSWORD=

# Authentication (hosted by default)
GRYT_AUTH_MODE=required
GRYT_OIDC_ISSUER=https://auth.gryt.chat/realms/gryt
GRYT_OIDC_AUDIENCE=gryt-web

# REQUIRED: session token signing key (generate with: openssl rand -base64 48)
JWT_SECRET=CHANGEME

# ScyllaDB
SCYLLA_LOCAL_DATACENTER=datacenter1
SCYLLA_KEYSPACE=gryt

# MinIO / S3 (internal by default)
S3_REGION=us-east-1
S3_BUCKET=gryt
MINIO_ROOT_USER=minioadmin
MINIO_ROOT_PASSWORD=minioadmin

# Client OIDC config injection (usually matches the server OIDC settings)
GRYT_OIDC_REALM=gryt
GRYT_OIDC_CLIENT_ID=gryt-web

